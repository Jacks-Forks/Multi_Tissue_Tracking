{% extends "base.html" %}
{% block title %}Show Tissues{% endblock %}
{% block head %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'style/myStyle.css') }}">
{% endblock %}


{% block content %}
<nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
  <div class="container-fluid">
    <ul class="nav navbar-nav ml-auto">
      <li class="nav-item" role="presentation"><a class="nav-link active" href="/showExp">Experiments</a></li>
      <li class="nav-item" role="presentation"><a class="nav-link" href="/showVideos">Videos</a></li>
      <li class="nav-item" role="presentation"><a class="nav-link" href="/showTissues">Tissues</a>
      </li>
    </ul>
    <button class="btn btn-link d-md-none rounded-circle mr-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
  </div>
</nav>

<table>
  <tr>
    <th>Tissue ID</th>
    <th>Tisssue Number</th>
    <th>Post</th>
    <th>CSV Path</th>
    <th>Video ID</th>
    <th>Cross Section Dist(mm)</th>
    <th>Delete</th>
    <th>Edit</th>
    <th>Download</th>
  </tr>
  {% for tissue in data %}
  <tr>
    <td>{{ tissue['tissue_id'] }}</td>
    <td>{{ tissue['tissue_number'] }}</td>
    <td>{{ tissue['post'] }}</td>
    <td>{{ tissue['csv_path'] }}</td>
    <td>{{ tissue['video_id'] }}</td>
    <td>{{ tissue['cross_section_dist'] }}
    <td>
      <button type="button" onclick="makeSure({{ tissue['tissue_id'] }})">Delete</button>
    </td>
    <td>
      <button type="button" onclick="test()">Edit</button>
    </td>
    <td>
      <form action="/download" method="POST">
        <button type="submit" name="download" value="{{ tissue['csv_path'] }}">Download</button>
      </form>
    </td>

  </tr>
  {% endfor %}
</table>
{% endblock %}

{% block extrajs %}
<script>
  function makeSure(id) {
    console.log(id)
    var r = confirm("Are you sure you want to Delete");
    if (r == true) {
      $(document).ready(function() {
        $.ajax({
          type: "POST",
          url: '/deleteTissue',
          dataType: "json",
          data: JSON.stringify(id),
          success: function(data) {
            console.log(data);
            window.location.reload(true);
          }
        })
      });
    }
  }
</script>
{% endblock %}