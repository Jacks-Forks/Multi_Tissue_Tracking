{% extends "base.html" %}
{% block title %}Show Video{% endblock %}
{% block head %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'style/myStyle.css') }}">
{% endblock %}


{% block content %}
<nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
  <div class="container-fluid">
    <ul class="nav navbar-nav ml-auto">
      <li class="nav-item" role="presentation"><a class="nav-link active" href="/showExp">Experiments</a></li>
      <li class="nav-item" role="presentation"><a class="nav-link" href="/showVideos">Videos</a></li>
      <li class="nav-item" role="presentation"><a class="nav-link" href="/showTissues">Tissues</a>
      </li>
    </ul>
    <button class="btn btn-link d-md-none rounded-circle mr-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
  </div>
</nav>
<table>
  <tr>
    <th>ID</th>
    <th>Date uploaded</th>
    <th>Date recored</th>
    <th>Frequency</th>
    <th>Calibration Dist (mm)</th>
    <th>Calibraton Factor</th>
    <th>Save Location</th>
    <th>Experiment Number</th>
    <th>Bio Reactor Number</th>
    <th>Delete</th>
    <th>Edit</th>
    <th>Download</th>
  </tr>
  {% for vid in data %}
  <tr>
    <td>{{ vid['video_id'] }}</td>
    <td>{{ vid['date_uploaded'] }}</td>
    <td>{{ vid['date_recorded'] }}</td>
    <td>{{ vid['frequency'] }}</td>
    <td>{{ vid['calibration_distance'] }}</td>
    <td>{{ vid['calibration_factor'] }}</td>
    <td>{{ vid['save_location'] }}</td>
    <td>{{ vid['experiment_num'] }}</td>
    <td>{{ vid['bio_reactor_number'] }}</td>
    <td>
      <button type="button" onclick="makeSure({{ vid['video_id'] }})">Delete</button>
    </td>
    <td>
      <button type="button">Edit</button>
    </td>
    <td>
      <form action="/download" method="POST">
        <button type="submit" name="download" value="{{ vid['save_location'] }}">Download</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}

{% block extrajs %}
<script>
  function makeSure(id) {
    var r = confirm("Are you sure you want to Delete");
    if (r == true) {
      $(document).ready(function() {
        $.ajax({
          type: "POST",
          url: '/deleteVideo',
          dataType: "json",
          data: JSON.stringify(id),
          success: function(data) {
            console.log(data);
            window.location.reload(true);
          }
        })
      });
    }
  }
</script>
{% endblock %}